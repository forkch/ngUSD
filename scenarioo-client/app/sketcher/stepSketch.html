<!-- scenarioo-client
Copyright (C) 2015, scenarioo.org Development Team

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<sc-breadcrumbs></sc-breadcrumbs>

<div ng-show="!vm.loading && vm.issueNotFound" id="issueDoesNotExistMessage">
    <div class="alert alert-info" role="alert">
        <p>The sketch you are looking for could not be found. Sketches are always assigned to a branch,
            so maybe you just have to select the correct branch in order to find it.</p>
    </div>
</div>

<div class="row sc-space-top sc-space-bottom" ng-hide="vm.loading || vm.issueNotFound">
    <div class="col-sm-8">
        <h2 class="sc-pageTitle">Sketch '{{vm.issue.name}}'</h2>
    </div>
    <div class="col-sm-4">
        <sc-meta-data-button class="pull-right" linking-variable="sketchShowMetadata"
                             local-storage-key="stepSketch"></sc-meta-data-button>
    </div>
</div>

<sc-meta-data-panel linking-variable="sketchShowMetadata" ng-hide="vm.loading || vm.issueNotFound">

    <div>

        <uib-tabset class="step-panes">
            <uib-tab heading="Sketch">
                <div class="sc-screenshot-border">
                    <img ng-src={{vm.getSketchScreenshotUrl()}} class="sc-screenshot"/>
                </div>
            </uib-tab>
            <uib-tab heading="Original Screenshot">
                <div class="sc-screenshot-border">
                    <img ng-src="{{vm.getOriginalScreenshotUrl()}}" class="sc-screenshot"/>
                </div>
            </uib-tab>
        </uib-tabset>

    </div>

    <div>

        <!-- Sketch Details Info -->
        <sc-collapsable-panel title="Sketch Details" key="stepSketchView-details" initially-expanded="true">

            <p id="issue-name">
                Name: {{vm.issue.name}}
            </p>

            <p id="issue-description">
                Description: {{vm.issue.description}}
            </p>

            <p id="author">
                Author: {{vm.issue.author}}
            </p>

            <p id="dateCreated">
                Created: {{vm.stepSketch.dateCreated | scDateTime}}
            </p>

            <p id="dateModified">
                Last modified: {{vm.stepSketch.dateModified | scDateTime}}
            </p>

        </sc-collapsable-panel>

        <!-- Sketch Context Info -->
        <sc-collapsable-panel title="Sketch Context" key="stepSketchView-context" initially-expanded="true">

            <p>The sketch is based on this step from the documentation.</p>

            <p id="usecase-context">
                Branch: {{vm.stepSketch.relatedStep.branchName}}</a>
            </p>

            <p id="usecase-context">
                Build: {{vm.stepSketch.relatedStep.buildName}}</a>
            </p>

            <p id="usecase-context">
                <a ng-href="{{vm.getUseCaseUrl()}}">Use Case: {{vm.stepSketch.relatedStep.usecaseName | scHumanReadable}}</a>
            </p>

            <p id="scenario-context">
                <a ng-href="{{vm.getScenarioUrl()}}">Scenario: {{vm.stepSketch.relatedStep.scenarioName | scHumanReadable}}</a>
            </p>

            <p id="step-context">
                <a ng-href="{{vm.getStepUrl()}}">Step: {{vm.stepSketch.relatedStep.pageName}}/{{vm.stepSketch.relatedStep.pageOccurrence}}/{{vm.stepSketch.relatedStep.stepInPageOccurrence}}</a>
            </p>

        </sc-collapsable-panel>

    </div>

</sc-meta-data-panel>



