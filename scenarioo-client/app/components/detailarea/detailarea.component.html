<!-- scenarioo-client
Copyright (C) 2014, scenarioo.org Development Team

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<div class="sc-meta-data-panel row">

    <button (click)="valueChange()" [attr.aria-expanded]="!isPanelCollapsed" aria-controls="collapseBasic"
            class="btn btn-primary pull-right"
            id="sc-showHideDetailsButton" type="button">
        {{ isPanelCollapsed ? "Show details" : "Hide details" }}
    </button>

    <div [ngClass]="isPanelCollapsed ? 'col-sm-11' : 'col-sm-8'">
        <ng-content></ng-content>
    </div>

    <div #metaDataPanel class="detail-container pull-right"  [ngClass]="isPanelCollapsed ? '' : 'col-sm-4'">
        <div class="detail-row">
            <div (click)="valueChange()" class="detail-cell detail-button">
                <span *ngIf="!isPanelCollapsed">
                    <i class="fas arrowCenter fa-angle-right"></i>
                </span>
                <span *ngIf="isPanelCollapsed">
                    <i class="fas arrowCenter fa-angle-left"></i>
                </span>
            </div>

            <div [collapse]="isPanelCollapsed" id="sc-metadata-panel">
                <div class="detail-cell detail-section">
                    <h3>Details</h3>
                    <accordion [isAnimated]="true">

                        <!-- TODO #946: Remember collapsed /expanded state of detail accordeon -->

                        <!-- usecases-overview -->
                        <sc-detail-accordion *ngIf="branchInformationTree" [informationTree]="branchInformationTree"
                                             [isFirstOpen]="true" [isTreeComponent]="true"
                                             detailAccordionName="Branch"></sc-detail-accordion>
                        <sc-detail-accordion *ngIf="buildInformationTree" [informationTree]="buildInformationTree"
                                             [isFirstOpen]="false" [isTreeComponent]="true"
                                             detailAccordionName="Build"></sc-detail-accordion>

                        <!-- scenarios-overview -->
                        <sc-detail-accordion *ngIf="usecaseInformationTree" [informationTree]="usecaseInformationTree"
                                             [isFirstOpen]="true" [isTreeComponent]="true"
                                             detailAccordionName="Use Case"></sc-detail-accordion>
                        <sc-detail-accordion *ngIf="relatedIssues && !isEmptyObject(relatedIssues)"
                                             [isFirstOpen]="false" [isSketchesComponent]="true"
                                             [relatedIssues]="relatedIssues"
                                             detailAccordionName="Related Sketches"></sc-detail-accordion>
                        <sc-detail-accordion *ngIf="useCaseLabels && !isEmptyObject(useCaseLabels)"
                                             [informationTree]="useCaseLabels" [isFirstOpen]="false"
                                             [isLabelComponent]="true" [labelConfigurations]="labelConfigurations"
                                             detailAccordionName="Labels"></sc-detail-accordion>
                        <sc-detail-accordion *ngFor="let dynamicInformationTree of metadataInformationTree"
                                             [detailAccordionName]="dynamicInformationTree.key"
                                             [informationTree]="dynamicInformationTree.value" [isFirstOpen]="false"
                                             [isTreeComponent]="true"></sc-detail-accordion>
                    </accordion>
                </div>
            </div>
        </div>
    </div>
</div>
